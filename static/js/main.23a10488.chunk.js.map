{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/Loader/Loader.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.js","services/pixabayApi.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Loader","className","s","type","color","height","width","timeout","searchQuery","perPage","page","axios","defaults","baseURL","url","get","then","data","hits","ImageGalleryItem","state","this","props","webformatURL","tags","largeImageURL","modalImg","showModal","onClick","src","alt","ImageGalleryItemImage","Component","ImageGallery","gallery","map","id","Searchbar","value","onChangeSearch","e","setState","currentTarget","onSubmitForm","preventDefault","onSubmit","SearchForm","SearchForm__button","SearchForm__button__label","onChange","SearchForm__input","autoComplete","autoFocus","placeholder","Button","modalRoot","document","querySelector","Modal","hanleKeyDown","code","onClose","handleBackdropClick","console","log","target","window","addEventListener","removeEventListener","selectedImg","createPortal","Overlay","App","isLoading","error","handleChangeQuery","query","fetchGallery","option","pixabayApi","prevState","catch","finally","toggleModal","handleModalImages","img","prevProps","scrollTo","top","documentElement","scrollHeight","behavior","length","style","textAlign","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.23a10488.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__H0Dg1\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1eXTz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3lfRW\",\"Modal\":\"Modal_Modal__f1ybO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3UUxe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__okHCa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__13osw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1lvTm\"};","import React from 'react';\n\nimport Loade from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nconst Loader = () => {\n  return (\n    <div className={s.Loader}>\n      <Loade\n        type=\"TailSpin\"\n        color=\"#3f51b5\"\n        height={100}\n        width={100}\n        timeout={3000}\n      />\n    </div>\n  );\n};\n\nexport default Loader;\n","import axios from 'axios';\n\nconst getFetch = ({ searchQuery, perPage = 3, page = 1 }) => {\n  axios.defaults.baseURL = 'https://pixabay.com/api';\n  let key = `19779483-2216087af4667397a75e88e7b`;\n  let url = `/?q=${searchQuery}&page=${page}&per_page=${perPage}&image_type=photo&orientation=horizontal&key=${key}`;\n\n  return axios.get(url).then(({ data }) => {\n    return data.hits;\n  });\n};\nexport default { getFetch };\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n// import noPoster from './noPoster.jpg';\n\nclass ImageGalleryItem extends Component {\n  state = {};\n  render() {\n    const {\n      webformatURL,\n      tags,\n      largeImageURL,\n      modalImg,\n      showModal,\n    } = this.props;\n\n    return (\n      <li className={s.ImageGalleryItem}>\n        <img\n          onClick={() => {\n            showModal();\n            modalImg(largeImageURL, tags);\n          }}\n          src={webformatURL}\n          alt={tags}\n          className={s.ImageGalleryItemImage}\n        />\n      </li>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  showModal: PropTypes.func.isRequired,\n  modalImg: PropTypes.func.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n};\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  state = {};\n  render() {\n    const { gallery, modalImg, showModal } = this.props;\n    return (\n      <ul className={s.ImageGallery}>\n        {gallery.map(({ id, webformatURL, largeImageURL, tags }) => {\n          return (\n            <ImageGalleryItem\n              key={id}\n              webformatURL={webformatURL}\n              largeImageURL={largeImageURL}\n              tags={tags}\n              modalImg={modalImg}\n              showModal={showModal}\n            ></ImageGalleryItem>\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\nImageGallery.propTypes = {\n  showModal: PropTypes.func.isRequired,\n  modalImg: PropTypes.func.isRequired,\n  gallery: PropTypes.arrayOf(\n    PropTypes.shape({\n      tags: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      id: PropTypes.number.isRequired,\n    }),\n  ).isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    value: '',\n  };\n  onChangeSearch = e => {\n    this.setState({ value: e.currentTarget.value });\n  };\n\n  onSubmitForm = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.value);\n    // this.setState({ value: '' });\n  };\n\n  render() {\n    const { value } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.onSubmitForm} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchForm__button}>\n            <span className={s.SearchForm__button__label}>Search</span>\n          </button>\n\n          <input\n            onChange={this.onChangeSearch}\n            className={s.SearchForm__input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={value}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button onClick={onClick} type=\"submit\" className={s.Button}>\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  state = {};\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.hanleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.hanleKeyDown);\n  }\n\n  hanleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n  handleBackdropClick = e => {\n    console.log(e);\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n  render() {\n    const { selectedImg, tags } = this.props;\n    return createPortal(\n      <>\n        <div className={s.Overlay} onClick={this.handleBackdropClick}>\n          <div className={s.Modal}>\n            <img src={selectedImg} alt={tags} />\n          </div>\n        </div>\n      </>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  selectedImg: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport './index.css';\nimport s from './App.module.css';\nimport Loader from './components/Loader';\nimport pixabayApi from './services/pixabayApi';\nimport ImageGallery from './components/ImageGallery';\nimport Searchbar from './components/Searchbar';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nclass App extends Component {\n  state = {\n    gallery: [],\n    searchQuery: '',\n    perPage: 12,\n    page: 1,\n    data: [],\n    isLoading: false,\n    error: null,\n    selectedImg: '',\n    showModal: false,\n    tags: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.searchQuery !== prevState.searchQuery) {\n      this.fetchGallery();\n    }\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  handleChangeQuery = query => {\n    if (query === this.state.searchQuery) {\n      this.fetchGallery();\n    } else {\n      this.setState({ searchQuery: query, page: 1, gallery: [], error: null });\n    }\n  };\n\n  fetchGallery = () => {\n    const { perPage, page, searchQuery } = this.state;\n    const option = {\n      searchQuery,\n      perPage,\n      page,\n    };\n    this.setState({ isLoading: true });\n    pixabayApi\n      .getFetch(option)\n      .then(data => {\n        this.setState(prevState => ({\n          gallery: [...prevState.gallery, ...data],\n          page: prevState.page + 1,\n          data,\n        }));\n        //можно еще так скролл сделать, но уже через стек с таймаутом\n        // setTimeout(() => {\n        //   window.scrollTo({\n        //     top: document.documentElement.scrollHeight,\n        //     behavior: 'smooth',\n        //   });\n        // }, 0);\n      })\n      .catch(error => this.state({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  toggleModal = () => {\n    this.setState({ showModal: !this.state.showModal });\n  };\n\n  handleModalImages = (img, tags) => {\n    this.setState({ selectedImg: img, tags });\n  };\n\n  render() {\n    const {\n      gallery,\n      isLoading,\n      error,\n      perPage,\n      data,\n      showModal,\n      selectedImg,\n      tags,\n    } = this.state;\n\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handleChangeQuery} />\n        {error && <h1>Введите запрос</h1>}\n        {gallery.length ? (\n          <ImageGallery\n            gallery={this.state.gallery}\n            modalImg={this.handleModalImages}\n            showModal={this.toggleModal}\n          />\n        ) : (\n          <h1 style={{ textAlign: 'center', color: '#3f51b5' }}>\n            Введите запрос\n          </h1>\n        )}\n        {data.length === perPage && <Button onClick={this.fetchGallery} />}\n        {isLoading && <Loader />}\n        {showModal && (\n          <Modal\n            onClose={this.toggleModal}\n            selectedImg={selectedImg}\n            tags={tags}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2ZaP8\",\"SearchForm\":\"Searchbar_SearchForm__2L36x\",\"SearchForm__button\":\"Searchbar_SearchForm__button__2pewY\",\"SearchForm__button__label\":\"Searchbar_SearchForm__button__label__sxLGH\",\"SearchForm__input\":\"Searchbar_SearchForm__input__ZEC2b\"};"],"sourceRoot":""}